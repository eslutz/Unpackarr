services:
  unpackarr:
    image: ghcr.io/eslutz/unpackarr:latest
    container_name: unpackarr
    environment:
      # Wrapper configuration
      - LOG_LEVEL=INFO
      - HEALTH_PORT=9092

      # Unpackerr configuration (see https://unpackerr.zip/docs/install/configuration)
      # Extraction settings
      - UN_PARALLEL=2
      - UN_DELETE_ORIG=false
      - UN_PASSWORDS=

      # Sonarr
      - UN_SONARR_0_URL=http://sonarr:8989
      - UN_SONARR_0_API_KEY=${SONARR_API_KEY}
      - UN_SONARR_0_PATHS_0=/downloads

      # Radarr
      - UN_RADARR_0_URL=http://radarr:7878
      - UN_RADARR_0_API_KEY=${RADARR_API_KEY}
      - UN_RADARR_0_PATHS_0=/downloads

      # Lidarr (optional)
      # - UN_LIDARR_0_URL=http://lidarr:8686
      # - UN_LIDARR_0_API_KEY=${LIDARR_API_KEY}

      # Readarr (optional)
      # - UN_READARR_0_URL=http://readarr:8787
      # - UN_READARR_0_API_KEY=${READARR_API_KEY}

      # Webhook notifications (optional - via Unpackerr)
      # - UN_WEBHOOK_0_URL=https://discord.com/api/webhooks/xxx
      # - UN_WEBHOOK_0_NICKNAME=Unpackerr
      # - UN_WEBHOOK_0_CHANNEL=downloads

    volumes:
      - /path/to/downloads:/downloads

    ports:
      - "9092:9092"  # Wrapper health endpoints
      - "5656:5656"  # Unpackerr web UI and API

    restart: unless-stopped

    healthcheck:
      test: ["CMD", "wget", "-q", "--spider", "http://localhost:9092/ready"]
      interval: 30s
      timeout: 5s
      retries: 3
      start_period: 10s

  # Example Sonarr service
  sonarr:
    image: lscr.io/linuxserver/sonarr:latest
    container_name: sonarr
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=UTC
    volumes:
      - ./sonarr:/config
      - /path/to/downloads:/downloads
      - /path/to/tv:/tv
    ports:
      - "8989:8989"
    restart: unless-stopped

  # Example Radarr service
  radarr:
    image: lscr.io/linuxserver/radarr:latest
    container_name: radarr
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=UTC
    volumes:
      - ./radarr:/config
      - /path/to/downloads:/downloads
      - /path/to/movies:/movies
    ports:
      - "7878:7878"
    restart: unless-stopped
