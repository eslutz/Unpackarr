# Unpackarr Configuration
# Copy this file to .env and configure for your environment
# All values shown are defaults unless otherwise noted

# =============================================================================
# CORE SETTINGS
# =============================================================================

# HTTP server port for health and metrics endpoints
HEALTH_PORT=8085

# Log level: DEBUG, INFO, WARN, ERROR
LOG_LEVEL=INFO

# Number of concurrent extractions (increase for faster processing of multiple archives)
EXTRACT_PARALLEL=1

# Delete original archives after successful extraction
# Set to false if you need to keep archives for seeding torrents
EXTRACT_DELETE_ORIG=true

# Comma-separated list of passwords to try when extracting encrypted archives
# Example: EXTRACT_PASSWORDS=password1,password2,password3
EXTRACT_PASSWORDS=

# Maximum time allowed for a single extraction (e.g., 10m, 1h)
EXTRACT_TIMEOUT=10m

# =============================================================================
# FOLDER WATCHING
# =============================================================================

# Enable folder watching for standalone extraction (without *arr apps)
# Useful for Whisparr and other apps not supported by golift.io/starr
WATCH_ENABLED=false

# Comma-separated list of directories to monitor for archives
# Example: WATCH_PATHS=/downloads,/media/torrents
WATCH_PATHS=/downloads

# How often to scan watch paths for new archives
WATCH_INTERVAL=30s

# Time to wait before deleting extracted archives (when EXTRACT_DELETE_ORIG=true)
WATCH_DELETE_DELAY=5m

# How often to clean up orphaned marker files
# Only relevant when EXTRACT_DELETE_ORIG=false
WATCH_CLEANUP_INTERVAL=1h

# =============================================================================
# TIMING (for *arr app integrations)
# =============================================================================

# How often to poll *arr app queues for completed downloads
POLL_INTERVAL=2m

# Wait time after download completes before attempting extraction
# Gives the *arr app time to move files and prepare for import
START_DELAY=1m

# Wait time between retry attempts for failed extractions
RETRY_DELAY=5m

# Maximum number of extraction retry attempts
MAX_RETRIES=3

# =============================================================================
# WEBHOOK NOTIFICATIONS
# =============================================================================

# Webhook endpoint URL (leave empty to disable notifications)
# Examples:
#   Discord: https://discord.com/api/webhooks/123/abc
#   Slack: https://hooks.slack.com/services/T00/B00/xxx
#   Gotify: https://gotify.example.com/message?token=xxx
WEBHOOK_URL=

# Webhook template format: discord, slack, gotify, json
WEBHOOK_TEMPLATE=discord

# Comma-separated list of events to send notifications for
# Available: queued, extracting, extracted, failed
WEBHOOK_EVENTS=extracted,failed

# HTTP request timeout for webhook calls
WEBHOOK_TIMEOUT=10s

# =============================================================================
# SONARR (TV Shows)
# =============================================================================

# Sonarr base URL (e.g., http://sonarr:8989)
SONARR_URL=

# Sonarr API key (found in Settings > General > Security)
SONARR_API_KEY=

# Comma-separated paths to monitor for Sonarr downloads
# Only archives in these paths will be processed
SONARR_PATHS=/downloads

# Comma-separated protocols to process: torrent, usenet, or both
# Leave empty to process all protocols
SONARR_PROTOCOLS=torrent

# API request timeout
SONARR_TIMEOUT=30s

# =============================================================================
# RADARR (Movies)
# =============================================================================

# Radarr base URL (e.g., http://radarr:7878)
RADARR_URL=

# Radarr API key (found in Settings > General > Security)
RADARR_API_KEY=

# Comma-separated paths to monitor for Radarr downloads
RADARR_PATHS=/downloads

# Comma-separated protocols to process: torrent, usenet, or both
RADARR_PROTOCOLS=torrent

# API request timeout
RADARR_TIMEOUT=30s

# =============================================================================
# LIDARR (Music)
# =============================================================================

# Lidarr base URL (e.g., http://lidarr:8686)
LIDARR_URL=

# Lidarr API key (found in Settings > General > Security)
LIDARR_API_KEY=

# Comma-separated paths to monitor for Lidarr downloads
LIDARR_PATHS=/downloads

# Comma-separated protocols to process: torrent, usenet, or both
LIDARR_PROTOCOLS=torrent

# API request timeout
LIDARR_TIMEOUT=30s

# =============================================================================
# READARR (Books/Audiobooks)
# =============================================================================

# Readarr base URL (e.g., http://readarr:8787)
READARR_URL=

# Readarr API key (found in Settings > General > Security)
READARR_API_KEY=

# Comma-separated paths to monitor for Readarr downloads
READARR_PATHS=/downloads

# Comma-separated protocols to process: torrent, usenet, or both
READARR_PROTOCOLS=torrent

# API request timeout
READARR_TIMEOUT=30s

# =============================================================================
# NOTES
# =============================================================================
#
# Marker Files:
#   When EXTRACT_DELETE_ORIG=false, hidden marker files (e.g., .movie.rar.unpackarr)
#   are created after successful extraction to prevent re-extraction. This is essential
#   if you keep archives for seeding. Orphaned markers are cleaned up automatically.
#
# Multiple *arr Apps:
#   You can configure multiple *arr apps simultaneously. Unpackarr will poll each
#   configured app's queue independently.
#
# Folder Watching:
#   Use folder watching for apps not supported by golift.io/starr (e.g., Whisparr).
#   Can be used alongside *arr app integrations.
#
# Path Configuration:
#   Ensure paths are consistent between Docker container mounts and *arr app settings.
#   Example: If Sonarr downloads to /data/torrents, mount that path to the container
#   and set SONARR_PATHS=/data/torrents
